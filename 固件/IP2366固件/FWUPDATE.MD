### 固件升级的目的

英集芯IP2366原厂的固件处于安全性考虑（避免充电倍率过高以及硬件受不住炸管）具有电池连续电流和峰值电流限制。默认设置是9.4A峰值电流，7A的最大连续电池电流。因此使用原厂固件时三串最高的充电输入功率只能达到65W。为了实现3串也可以达到140W充放电因此我特意找原厂的技术部门定制了无任何充电电流限制的特殊固件使得三串也可以跑满140W输入功率。实测在任何电池电压条件下输入均能达到接近140W的功率。

### 如何升级固件

英集芯的IP2366实际上是一个软件定义的电源SoC，因此通过官方的专用烧录硬件可以通过芯片引出的充放电 USB-Type-C接口进行升级。升级流程是首先将电池架上的电池全部拆下，等待2分钟确保电池架的电容内没有任何残余电能（**这一步极其重要！如果在芯片连接了电池的状态下尝试升级，会导致芯片固件不完整引起芯片死机甚至永久性损坏芯片内部底层数据，使芯片永远变砖无法使用和再次烧录！**）。然后通过C to C线连接电池架和烧录器。接着把烧录器连接至电脑，将解密后的固件原始bin复制到烧录器的盘符里面。然后按照烧录器操作文档进行操作升级（这份固件升级指引可以问原厂代理要）

### 如果我没有烧录器怎么办呢？

有些具有原厂代理资格的英集芯分销代理具有这个烧录工具，可以在购买IP2366芯片时提供定制固件的原始bin文件给他们并让他们在出货之前烧录好。

### 固件为什么是.ENC后缀而不是原始的bin后缀？

考虑到无限制充电固件在充电限流方面没有任何保护，如果用户使用的电池不足以承受140W满功率充电的倍率将会造成严重的事故。同时该固件属于定制固件，涉及到原厂合作关系方面的复杂事情，因此不能直接提供原始的固件文件。ENC文件是基于原始固件bin文件进行加密和字符序列化后的加密产物。对于该文件的解密工具您可联系作者并在通过资格审查后索取。

对于未通过资格审查的用户，您可直接使用官方的IP2366_I2C版本芯片。使用该版本芯片则电池棒控制器固件将会把最大充放电功率锁定在65W，充电时间约3.5小时。

----------------------------------------------------------------------------------------------------------------------------------
© redstoner_35 @ 35's Embedded Systems Inc.  2025
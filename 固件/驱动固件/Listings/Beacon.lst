C51 COMPILER V9.60.0.0   BEACON                                                            05/18/2025 14:33:19 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE BEACON
OBJECT MODULE PLACED IN .\Objects\Beacon.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Logic\Beacon.c OMF2 OPTIMIZE(9,SPEED) BROWSE MODDP2 INCDIR(.\StdDriver\i
                    -nc;.\Hardware;.\include\Hardware;.\include\Logic;.\include\Middleware;.\include\System) DEFINE(EnableStdGPIO) DEBUG PRIN
                    -T(.\Listings\Beacon.lst) TABS(2) OBJECT(.\Objects\Beacon.obj)

line level    source

   1          #include "Beacon.h"
   2          
   3          //内部标志位
   4          static xdata BeaconStateDef State;
   5          static xdata char BeaconOnTIM;
   6          static xdata char BeaconOffTIM;
   7          
   8          //复位状态机
   9          void BeaconFSM_Reset(void)
  10            {
  11   1        State=BeaconState_InfoUser;
  12   1        BeaconOnTIM=0;
  13   1        BeaconOffTIM=8*BeaconInfoTime;
  14   1        }
  15          
  16          //关闭时间计时
  17          void BeaconFSM_TIMHandler(void)
  18            {
  19   1        if(BeaconOffTIM>0)BeaconOffTIM--;
  20   1        }
  21          
  22          //信标模式状态机
  23          char BeaconFSM(void)
  24            {
  25   1        switch(State)
  26   1          {
  27   2          case BeaconState_InfoUser:  
  28   2            if(BeaconOffTIM>0)return 2; //当前处于提示状态，提示用户
  29   2            //提示时间到，跳转到OFF阶段准备开始显示
  30   2            BeaconOffTIM=BeaconOFFTime*8;
  31   2            State=BeaconState_OFFWait;
  32   2            break;
  33   2          //初始化
  34   2          case BeaconState_Init:
  35   2            BeaconOnTIM=BeaconOnTime;
  36   2            State=BeaconState_ONStrobe;
  37   2            return 1;
  38   2          //等待阶段
  39   2          case BeaconState_ONStrobe:
  40   2            BeaconOnTIM--;
  41   2            if(BeaconOnTIM>0)return 1;
  42   2            //点亮时间到，熄灭
  43   2            BeaconOffTIM=BeaconOFFTime*8;
  44   2            State=BeaconState_OFFWait;
  45   2            break;
  46   2          //等待熄灭阶段结束
  47   2          case BeaconState_OFFWait:
  48   2            if(!BeaconOffTIM)State=BeaconState_Init;
  49   2            break;
  50   2          }
  51   1        //其余状态返回0使LED熄灭
  52   1        return 0;
  53   1        }
C51 COMPILER V9.60.0.0   BEACON                                                            05/18/2025 14:33:19 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    127    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      3    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

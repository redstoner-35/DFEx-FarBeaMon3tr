C51 COMPILER V9.60.0.0   NTC                                                               05/18/2025 14:33:18 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE NTC
OBJECT MODULE PLACED IN .\Objects\NTC.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Hardware\NTC.c OMF2 OPTIMIZE(9,SPEED) BROWSE MODDP2 INCDIR(.\StdDriver\i
                    -nc;.\Hardware;.\include\Hardware;.\include\Logic;.\include\Middleware;.\include\System) DEFINE(EnableStdGPIO) DEBUG PRIN
                    -T(.\Listings\NTC.lst) TABS(2) OBJECT(.\Objects\NTC.obj)

line level    source

   1          #include <stdbool.h>
   2          
   3          /*-------------------------------------------------------------
   4           This is an automatically generated file by NTC resistor LUT 
   5           generator. DO NOT EDIT UNLESS YOU FULLY UNDERSTAND WHAT THIS
   6           FILE ACTUALLY DOES!
   7           NTC PARAMETER:100.00KŒ© @ 25‚ÑÉ B4250
   8           Table temperature range:-24‚ÑÉ to 100‚ÑÉ
   9           Total ROM space for table:378 Bytes
  10           Target MCU Architecture:8051 Based MCU
  11          -------------------------------------------------------------*/
  12          
  13          //Ê∏©Â∫¶ÂèçÈ¶àÁöÑÂÅèÁßªÂÄºÔºàÂ¶ÇÊûú‰Ω†ÂèëÁé∞Ê∏©Â∫¶‰∏çÂáÜÔºåÂèØ‰ª•Âú®ËøôÈáåÂØπÊ∏©Â∫¶ÁõëÊµãÁ≥ªÁªüËøõË°åTRIMÔ
             -ºâ
  14          #define TemperatureReportOffset 0
  15          
  16          code unsigned long NTCTableTop[55]={
  17          1260250, 1179691, 1104854, 1035294,   //-20 Âà∞ -17 ÊëÑÊ∞èÂ∫¶
  18          970604, 910411, 854373, 802176,   //-16 Âà∞ -13 ÊëÑÊ∞èÂ∫¶
  19          753532, 708176, 665863, 626371,   //-12 Âà∞ -9 ÊëÑÊ∞èÂ∫¶
  20          589493, 555039, 522834, 492718,   //-8 Âà∞ -5 ÊëÑÊ∞èÂ∫¶
  21          464541, 438167, 413468, 390328,   //-4 Âà∞ -1 ÊëÑÊ∞èÂ∫¶
  22          368638, 348299, 329218, 311309,   //0 Âà∞ 3 ÊëÑÊ∞èÂ∫¶
  23          294493, 278697, 263852, 249895,   //4 Âà∞ 7 ÊëÑÊ∞èÂ∫¶
  24          236769, 224417, 212791, 201842,   //8 Âà∞ 11 ÊëÑÊ∞èÂ∫¶
  25          191528, 181807, 172643, 163999,   //12 Âà∞ 15 ÊëÑÊ∞èÂ∫¶
  26          155843, 148145, 140876, 134011,   //16 Âà∞ 19 ÊëÑÊ∞èÂ∫¶
  27          127523, 121390, 115591, 110105,   //20 Âà∞ 23 ÊëÑÊ∞èÂ∫¶
  28          104914, 100000, 95346, 90938,   //24 Âà∞ 27 ÊëÑÊ∞èÂ∫¶
  29          86762, 82802, 79048, 75487,   //28 Âà∞ 31 ÊëÑÊ∞èÂ∫¶
  30          72108, 68901, 65857  };
  31          
  32          code unsigned int NTCTableBottom[61]={
  33          62965, 60218, 57607, 55125,   //35 Âà∞ 38 ÊëÑÊ∞èÂ∫¶
  34          52765, 50520, 48384, 46350,   //39 Âà∞ 42 ÊëÑÊ∞èÂ∫¶
  35          44415, 42572, 40816, 39143,   //43 Âà∞ 46 ÊëÑÊ∞èÂ∫¶
  36          37548, 36027, 34577, 33194,   //47 Âà∞ 50 ÊëÑÊ∞èÂ∫¶
  37          31874, 30615, 29412, 28263,   //51 Âà∞ 54 ÊëÑÊ∞èÂ∫¶
  38          27166, 26118, 25116, 24159,   //55 Âà∞ 58 ÊëÑÊ∞èÂ∫¶
  39          23243, 22367, 21529, 20728,   //59 Âà∞ 62 ÊëÑÊ∞èÂ∫¶
  40          19960, 19226, 18522, 17848,   //63 Âà∞ 66 ÊëÑÊ∞èÂ∫¶
  41          17203, 16584, 15991, 15422,   //67 Âà∞ 70 ÊëÑÊ∞èÂ∫¶
  42          14877, 14354, 13853, 13371,   //71 Âà∞ 74 ÊëÑÊ∞èÂ∫¶
  43          12909, 12466, 12040, 11631,   //75 Âà∞ 78 ÊëÑÊ∞èÂ∫¶
  44          11238, 10860, 10497, 10148,   //79 Âà∞ 82 ÊëÑÊ∞èÂ∫¶
  45          9813, 9491, 9181, 8882,   //83 Âà∞ 86 ÊëÑÊ∞èÂ∫¶
  46          8595, 8319, 8053, 7797   //87 Âà∞ 90 ÊëÑÊ∞èÂ∫¶
  47          };
  48          
  49          //NTCÊ∏©Â∫¶Êç¢ÁÆóÂáΩÊï∞
  50          //‰º†ÂÖ•ÂèÇÊï∞ÔºöNTCÈòªÂÄº(Œ©),Ê∏©Â∫¶ÊòØÂê¶ÊúâÊïàÁöÑboolÊåáÈíàËæìÂá∫
  51          //ËøîÂõûÂèÇÊï∞ÔºöÊ∏©Â∫¶ÂÄº(‚ÑÉ)
  52          int CalcNTCTemp(bool *IsNTCOK,unsigned long NTCRes){
C51 COMPILER V9.60.0.0   NTC                                                               05/18/2025 14:33:18 PAGE 2   

  53   1      char i;
  54   1      volatile unsigned long NTCTableValue;
  55   1      //ÁîµÈòªÂÄºÂ§ß‰∫éÊü•ÊâæË°®ÈòªÂÄº‰∏äÈôêÔºåÊ∏©Â∫¶ÂºÇÂ∏∏
  56   1      if(NTCRes>(unsigned long)1260250)
  57   1        {
  58   2        *IsNTCOK=false;
  59   2        return -20+TemperatureReportOffset;
  60   2        }
  61   1      //ÁîµÈòªÂÄºÂ∞è‰∫éÊü•ÊâæË°®ÈòªÂÄºÁöÑÈòªÂÄº‰∏ãÈôêÔºåÊ∏©Â∫¶ÂºÇÂ∏∏
  62   1      if(NTCRes<(unsigned long)7797)
  63   1        {
  64   2        *IsNTCOK=false;
  65   2        return 100+TemperatureReportOffset;
  66   2        }
  67   1      //Ê∏©Â∫¶Ê≠£Â∏∏ÔºåÂºÄÂßãÊü•Ë°®
  68   1      *IsNTCOK=true;
  69   1      if(NTCRes>(unsigned long)62965)for(i=0;i<55;i++)if(NTCTableTop[i]<=NTCRes)return (-20+TemperatureReportOff
             -set)+i;
  70   1      for(i=0;i<61;i++)
  71   1        {
  72   2        NTCTableValue=(unsigned long)NTCTableBottom[i];
  73   2        NTCTableValue&=0xFFFF;
  74   2        if(NTCTableValue<=NTCRes)return (TemperatureReportOffset+35)+i;
  75   2        }
  76   1      //Êï∞ÂÄºÊü•ÊâæÂ§±Ë¥•ÔºåËøîÂõûÈîôËØØÂÄº
  77   1      *IsNTCOK=false;
  78   1      return 0;
  79   1      }
  80          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    279    ----
   CONSTANT SIZE    =    342    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
